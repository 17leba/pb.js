<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="jquery.js"></script>
	<script src="pb.js"></script>
	<script>
	y(function(){
		alert(1)
	})
	y(function(){})
	$(function(){
		// alert("")
	})
	$(function(){
		// alert("")
	})
	// DOMContentLoaded DOM树建成之时就触发
	// onload必须要等待页面所有元素的资源都下载完毕时才触发
	var readyList = [];
	function domReady(fn){
		var	DOMContentLoaded,
			initReady,
			isReady = false;
		// 确保参数为函数 且只执行一次
		if(typeof fn !== "function" || isReady){
			return;
		}
		isReady = true;
		// DOMContentLoaded的多重加载，全部放进readyList数组中
		// initReady:循环执行 readyList中的事件
		readyList[readyList.length] = fn;
		initReady = function(){
			for(var i = 0;i < readyList.length;i++){
				var fn = readyList[i];
				fn();
			}
		}
		// DOMContentLoaded的动态赋值
		if(document.addEventListener){
			DOMContentLoaded = function(){
				// 清除DOMContentLoaded事件
				document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);
				// 开始执行
				initReady();
			}
		}else{
			DOMContentLoaded = function(){
				if(document.readyState === "complete"){
					document.detachEvent("onreadystatechange",DOMContentLoaded);
					initReady();
				}
			}
		}
		if(document.addEventListener){
			document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);
		}else{
			document.attachEvent("onreadystatechange",DOMContentLoaded);
		}
	}
	domReady(function(){
		return 1;
	})
	domReady(function(){
		return 2;
	})
	var dom = {};
	dom.events = [];
	dom.ready = function(fn){
		if(typeof fn !== "function"){
			return;
		}
		dom.events[dom.events.length] = fn;
		if(document.addEventListener){
			document.addEventListener("DOMContentLoaded",dom.initReady,false);
		}else{
			if(document.readyState === "complete"){
				document.attachEvent("onreadystatechange",dom.initReady);
			}
		}
	}
	dom.initReady = function(){
		var DOMContentLoaded,
			len = dom.events.length;
		if(dom.isReady){
			return;
		}
		dom.isReady = true;
		for(var i = 0;i < len;i++){
			var fn = dom.events[i];
			fn();
		}
		return function(){
			if(document.addEventListener){
				document.removeEventListener("DOMContentLoaded",dom.initReady,false);
				dom.initReady();
			}else{
				document.detachEvent("onreadystatechange",dom.initReady);
				dom.initReady();
			}
		}
	}
	dom.ready(function(){
		// alert(1)
	})
	dom.ready(function(){
		// alert(2)
	})
	// window.onload = function(){
	// 	document.attachEvent("onclick",function(){
	// 		alert(1)
	// 	})
	// 	document.attachEvent("onclick",function(){
	// 		alert(2)
	// 	})
	// }
	// console.log(readyList)
	</script>
</head>
<body>
	<div class="b">
		<div class="c">testC</div>
	</div>
	<a id="a">testA</a>
	<!-- <input type="text" id="c"> -->
	<!-- <img src="test.jpg" alt=""> -->
</body>
</html>